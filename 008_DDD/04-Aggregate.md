# 키워드

## 학습 키워드

- 집합체 (Aggregate)
- 불변식
- 트랜잭션적 일관성과 결과적 일관성

# 내용

- 집합체

  - 불변식을 유지하고, 여러 도메인 객체를 사용하기 좋게 만들어 주는 것.
  - ex) 자동파부품이 아닌, 자동차 라는 단위.

- 불변식
  - 지켜야할 제약 조건, 규칙.
- ## 트랜잭션적 일관성과 결과적 일관성
- 4가지 경험 법칙

1. 불변식을 통해 일관성 경계를 찾아서 모델링한다. Aggregate은 트랜잭션적 일관성 경계와 동의어다.
2. 작은 Aggregate으로 설계한다.
3. ID로 다른 Aggregate을 참조한다. JPA 등을 사용하면 관련된 객체를 모두 직접 참조할 수 있게 되는데, 그렇게 하지 않는다.
4. 경계 밖에선 결과적 일관성을 사용한다. 이를 위해 도메인 이벤트 등을 사용할 수 있다.

- 트랜잭션적 일관성 Transactional Consistency
  - 데이터를 미러링하는 동안 트랜잭션 일관성은 트랜잭션의 일부가 대상 데이터베이스에 커밋된 경우 해당 소스 트랜잭션의 다른 모든 범위 내 작업도 커밋되도록 보장하는 것입니다.
  - https://www.ibm.com/docs/ko/idr/11.3.3?topic=glossary-transaction-consistency
- 결과적 일관성 Eventual Consistency
  - 최종 일관성은 분산 컴퓨팅에서 고가용성을 달성하기 위해 사용되는 일관성 모델로, 특정 데이터 항목에 새로운 업데이트가 이루어지지 않으면 해당 항목에 대한 모든 액세스가 최종 업데이트된 값을 반환한다는 것을 비공식적으로 보장
  - https://en.wikipedia.org/wiki/Eventual_consistency

# 필기

- 구성요소가 뭐가 있는지 설명한 것에 불과함.
- 자동차가 제공하는 퍼블릭 인페이스를 통해서 작업 한다면 좋겠죠??
- 상식대로 가자.
- 우리는 order라는 것의 root로 잡을 게요.
- 자동차라는 엔티티를 root로 잡을 수도 있음.
- 직접접근은 못함...
- 아 안되는 구나..
- 더 나은 표현력을 가질 수도 있다.
- 이것도 쓸수 있다.
- 하지만, 좀더 동작에 집중하자.
- 기타 2개 더 살건데??

  - 에그리거트.

- 트랜잭션적 일관성 경계와 동일하다.
- ID로 다른 에그리거트를 참조한다.

- 유저 모델에 ㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹㄹ

일초 지나고 나서라도 반영을 해야한다.

거의다 왔다.
